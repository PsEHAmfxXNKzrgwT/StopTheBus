{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import{BrowserRouter as Router,Route,Routes,Link}from'react-router-dom';import Settings from'./Settings';import Lobby from'./components/Lobby';import GameBoard from'./components/GameBoard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[gameState,setGameState]=useState({gameId:null,currentRound:1,scores:{},gameStarted:false,categories:['Boy','Girl','Country','Food','Colour','Car','Movie / TV Show'],players:[],currentLetter:null,host:null});const[playerName,setPlayerName]=useState('');const[gameIdInput,setGameIdInput]=useState('');const[answers,setAnswers]=useState({});const[message,setMessage]=useState('');const[darkMode,setDarkMode]=useState(localStorage.getItem('darkMode')==='true');useEffect(()=>{document.documentElement.setAttribute('data-theme',darkMode?'dark':'light');},[darkMode]);const toggleDarkMode=()=>{const newMode=!darkMode;setDarkMode(newMode);localStorage.setItem('darkMode',newMode);};useEffect(()=>{if(!gameState.gameId)return;const interval=setInterval(async()=>{try{const res=await fetch(`http://localhost:6464/get-game?gameId=${gameState.gameId}`);if(res.ok){const data=await res.json();setGameState(prev=>({...prev,players:data.players,gameStarted:data.gameStarted,currentRound:data.currentRound,currentLetter:data.currentLetter,scores:data.scores||prev.scores,host:data.host}));}}catch{}},3000);return()=>clearInterval(interval);},[gameState.gameId]);const handleStartGame=async()=>{if(!gameState.gameId)return setMessage(\"‚ùå No game to start.\");try{const res=await fetch('http://localhost:6464/start-game',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({gameId:gameState.gameId,playerName})});if(res.ok){setGameState(prev=>({...prev,gameStarted:true,currentRound:1}));setMessage(\"üéÆ Game started!\");await handleStartRound();}else{const text=await res.text();setMessage(\"‚ùå \"+text);}}catch{setMessage('‚ùå Error starting game.');}};const handleStartRound=async()=>{try{const nextRoundRes=await fetch('http://localhost:6464/next-round',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({gameId:gameState.gameId,playerName})});const nextRoundText=await nextRoundRes.text();if(!nextRoundRes.ok){return setMessage(`‚ö†Ô∏è ${nextRoundText}`);}const res=await fetch('http://localhost:6464/start-round',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({gameId:gameState.gameId})});const data=await res.json();setGameState(prev=>({...prev,currentRound:data.currentRound,currentLetter:data.currentLetter}));setAnswers({});setMessage(`üî§ New round started! Letter: ${data.currentLetter}`);}catch(err){setMessage('‚ùå Error starting new round.');}};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDE8C Stop the Bus\"}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"}),\" | \",/*#__PURE__*/_jsx(Link,{to:\"/settings\",children:\"Settings\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(Settings,{toggleDarkMode:toggleDarkMode,currentMode:darkMode?'dark':'light'})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:!gameState.gameStarted?/*#__PURE__*/_jsx(Lobby,{playerName:playerName,setPlayerName:setPlayerName,gameIdInput:gameIdInput,setGameIdInput:setGameIdInput,setGameState:setGameState,gameState:gameState,setMessage:setMessage,handleStartGame:handleStartGame,handleStartRound:handleStartRound}):/*#__PURE__*/_jsx(GameBoard,{gameState:gameState,playerName:playerName,answers:answers,setAnswers:setAnswers,setMessage:setMessage})})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Link","Settings","Lobby","GameBoard","jsx","_jsx","jsxs","_jsxs","App","gameState","setGameState","gameId","currentRound","scores","gameStarted","categories","players","currentLetter","host","playerName","setPlayerName","gameIdInput","setGameIdInput","answers","setAnswers","message","setMessage","darkMode","setDarkMode","localStorage","getItem","document","documentElement","setAttribute","toggleDarkMode","newMode","setItem","interval","setInterval","res","fetch","ok","data","json","prev","clearInterval","handleStartGame","method","headers","body","JSON","stringify","handleStartRound","text","nextRoundRes","nextRoundText","err","children","className","to","path","element","currentMode"],"sources":["/Users/logan/Desktop/STB_1/stop-the-bus/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Route, Routes, Link } from 'react-router-dom';\nimport Settings from './Settings';\nimport Lobby from './components/Lobby';\nimport GameBoard from './components/GameBoard';\n\nfunction App() {\n  const [gameState, setGameState] = useState({\n    gameId: null,\n    currentRound: 1,\n    scores: {},\n    gameStarted: false,\n    categories: ['Boy', 'Girl', 'Country', 'Food', 'Colour', 'Car', 'Movie / TV Show'],\n    players: [],\n    currentLetter: null,\n    host: null,\n  });\n\n  const [playerName, setPlayerName] = useState('');\n  const [gameIdInput, setGameIdInput] = useState('');\n  const [answers, setAnswers] = useState({});\n  const [message, setMessage] = useState('');\n  const [darkMode, setDarkMode] = useState(localStorage.getItem('darkMode') === 'true');\n\n  useEffect(() => {\n    document.documentElement.setAttribute('data-theme', darkMode ? 'dark' : 'light');\n  }, [darkMode]);\n\n  const toggleDarkMode = () => {\n    const newMode = !darkMode;\n    setDarkMode(newMode);\n    localStorage.setItem('darkMode', newMode);\n  };\n\n  useEffect(() => {\n    if (!gameState.gameId) return;\n    const interval = setInterval(async () => {\n      try {\n        const res = await fetch(`http://localhost:6464/get-game?gameId=${gameState.gameId}`);\n        if (res.ok) {\n          const data = await res.json();\n          setGameState((prev) => ({\n            ...prev,\n            players: data.players,\n            gameStarted: data.gameStarted,\n            currentRound: data.currentRound,\n            currentLetter: data.currentLetter,\n            scores: data.scores || prev.scores,\n            host: data.host,\n          }));\n        }\n      } catch {}\n    }, 3000);\n    return () => clearInterval(interval);\n  }, [gameState.gameId]);\n\n  const handleStartGame = async () => {\n    if (!gameState.gameId) return setMessage(\"‚ùå No game to start.\");\n    try {\n      const res = await fetch('http://localhost:6464/start-game', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ gameId: gameState.gameId, playerName }),\n      });\n\n      if (res.ok) {\n        setGameState((prev) => ({ ...prev, gameStarted: true, currentRound: 1 }));\n        setMessage(\"üéÆ Game started!\");\n        await handleStartRound();\n      } else {\n        const text = await res.text();\n        setMessage(\"‚ùå \" + text);\n      }\n    } catch {\n      setMessage('‚ùå Error starting game.');\n    }\n  };\n\n  const handleStartRound = async () => {\n    try {\n      const nextRoundRes = await fetch('http://localhost:6464/next-round', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ gameId: gameState.gameId, playerName }),\n      });\n\n      const nextRoundText = await nextRoundRes.text();\n      if (!nextRoundRes.ok) {\n        return setMessage(`‚ö†Ô∏è ${nextRoundText}`);\n      }\n\n      const res = await fetch('http://localhost:6464/start-round', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ gameId: gameState.gameId }),\n      });\n\n      const data = await res.json();\n      setGameState((prev) => ({\n        ...prev,\n        currentRound: data.currentRound,\n        currentLetter: data.currentLetter,\n      }));\n\n      setAnswers({});\n      setMessage(`üî§ New round started! Letter: ${data.currentLetter}`);\n    } catch (err) {\n      setMessage('‚ùå Error starting new round.');\n    }\n  };\n\n  return (\n    <Router>\n      <div className=\"app-container\">\n        <h1>üöå Stop the Bus</h1>\n        <nav>\n          <Link to=\"/\">Home</Link> | <Link to=\"/settings\">Settings</Link>\n        </nav>\n\n        <Routes>\n          <Route path=\"/settings\" element={\n            <Settings toggleDarkMode={toggleDarkMode} currentMode={darkMode ? 'dark' : 'light'} />\n          } />\n          <Route path=\"/\" element={\n            !gameState.gameStarted ? (\n              <Lobby\n                playerName={playerName}\n                setPlayerName={setPlayerName}\n                gameIdInput={gameIdInput}\n                setGameIdInput={setGameIdInput}\n                setGameState={setGameState}\n                gameState={gameState}\n                setMessage={setMessage}\n                handleStartGame={handleStartGame}\n                handleStartRound={handleStartRound}\n              />\n            ) : (\n              <GameBoard\n                gameState={gameState}\n                playerName={playerName}\n                answers={answers}\n                setAnswers={setAnswers}\n                setMessage={setMessage}\n              />\n            )\n          } />\n        </Routes>\n\n        {message && <div className=\"message\">{message}</div>}\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}